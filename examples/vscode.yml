# Configuration for Visual Studio Code
version: 1

# --- Application Metadata ---
app_name: "Visual Studio Code"
container_name: "debox-vscode" # Keep this unique if creating multiple instances

# --- Container Image Definition ---
image:
  base: "debian:latest"
  repositories:
    - key_url: "https://packages.microsoft.com/keys/microsoft.asc"
      key_path: "/etc/apt/keyrings/packages.microsoft.gpg"
      repo_string: "deb [arch=amd64 signed-by=/etc/apt/keyrings/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main"
  packages:
    - "code"
    - "git"
    - "build-essential"
    - "podman"
    - "python3" # Keep alive script
    - "locales" # Keep alive script locale fix? (might remove later)
    # Add other common dev tools as needed: nodejs, etc.
    - "libpulse0" # May be needed by extensions or accessibility
    - "fontconfig"
    - "libfontconfig1"

# --- Runtime Environment Configuration ---
runtime:
  desktop_integration: true
  volumes:
    - "~/Repozytoria:/home/marcin/Repozytoria"
  prepend_exec_args:
    - "--ozone-platform=wayland"
    # - "--no-sandbox" # Add back if Ozone flag alone isn't enough
  skip_categories:
    - "TerminalEmulator"
    - "System"
  aliases:
    "code": "code-devbox" # Example alias

# --- Permissions ---
permissions:
  # Standard permissions for a development environment
  network: true       # Required for extensions, git, etc.
  bluetooth: false    # Unlikely needed
  gpu: true           # Required for rendering
  sound: true         # May be needed for accessibility features
  webcam: false       # Unlikely needed
  microphone: false   # Unlikely needed
  printers: false     # Unlikely needed
  system_dbus: true   # Recommended for portal integration
  devices: []
