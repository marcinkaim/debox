# examples/vscode-debox.yml
version: 1
app_name: "VS Code (Debox Dev)"
container_name: "debox-vscode-debox"

image:
  base: "localhost:5000/debox-base-vscode:latest"
  packages:
    - "python3-venv"
    - "python3-pip"
    - "python3-typer"
    - "python3-rich"
    - "dpkg-dev"
    - "debhelper"
    - "devscripts"

storage:
  volumes:
    - "~/Repozytoria/debox:/home/marcin/Repozytoria/debox"
    - "/run/user/1000/podman/podman.sock:/run/user/1000/podman/podman.sock"

runtime:
  default_exec: "code"
  environment:
    CONTAINER_HOST: "unix:///run/user/1000/podman/podman.sock"
    # GIT_USER_NAME: ""
    # GIT_USER_EMAIL: ""
  prepend_exec_args:
    - "--ozone-platform=wayland"
    - "--wait"
    - "/home/marcin/Repozytoria/debox"

integration:
  desktop_integration: true
  startup_wm_class: "code"
  aliases:
    "code": "code-debox"
  skip_categories:
    - "TerminalEmulator"
    - "System"

permissions:
  network: true
  gpu: true
  sound: true
  webcam: false
  microphone: false
  printers: false
  system_dbus: true
  devices: []

# security:
#   gpg_key_id: ""

# lifecycle:
#   post_install: |
#     # Git configuration
#     git config --global user.name "$GIT_USER_NAME"
#     git config --global user.email "$GIT_USER_EMAIL"
    
#     # Signing configuration (if key exists)
#     if [ -n "$DEBOX_GPG_KEY_ID" ]; then
#         git config --global user.signingkey "$DEBOX_GPG_KEY_ID"
#         git config --global commit.gpgsign true
#         echo "Git GPG signing enabled for key $DEBOX_GPG_KEY_ID"
#     else
#         git config --global commit.gpgsign false
#         echo "Git GPG signing disabled (no key provided)"
#     fi